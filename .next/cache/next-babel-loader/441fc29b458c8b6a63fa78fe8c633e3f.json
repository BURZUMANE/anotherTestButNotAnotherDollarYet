{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/timurzakirov/Desktop/stupido/anotherTestButNotAnotherDollarYet/pages/index.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from \"react\";\nimport Fetch from \"isomorphic-unfetch\";\nimport Layout from \"../components/Layout\";\nimport { NewsProvider } from \"../mobx/newsContext\";\nimport { useNewsStore } from \"../mobx/newsContext\";\nimport { NewsList } from \"../components/NewsList\";\nimport { Paggination } from \"../components/Paggination\";\nimport URL from \"../config\"; // description\n\nvar StoreContext = React.createContext();\n\nvar BugsForm = function BugsForm() {\n  _s();\n\n  var store = useNewsStore();\n\n  var _React$useState = React.useState({\n    title: \"\"\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      bug = _React$useState2[0],\n      setBug = _React$useState2[1];\n\n  return __jsx(\"form\", {\n    onSubmit: function onSubmit(e) {\n      store.addBug(bug);\n      setBug({\n        title: \"\"\n      });\n      e.preventDefault();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 5\n    }\n  }, __jsx(\"input\", {\n    type: \"text\",\n    value: bug.title,\n    onChange: function onChange(e) {\n      var value = e.target.value;\n      setBug(function (prev) {\n        return _objectSpread(_objectSpread({}, prev), {}, {\n          title: value\n        });\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 7\n    }\n  }), __jsx(\"button\", {\n    type: \"submit\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }\n  }, \"Add\"));\n};\n\n_s(BugsForm, \"hf5C83bKHWygVYjHwCkOYEF1Xe4=\", false, function () {\n  return [useNewsStore];\n});\n\n_c = BugsForm;\n\nvar Wrapper = function Wrapper(_ref) {\n  _s2();\n\n  var children = _ref.children,\n      props = _ref.props;\n  var store = useNewsStore();\n  store.getNews(props.data);\n  ;\n  return __jsx(React.Fragment, null, children);\n};\n\n_s2(Wrapper, \"sF4Ior212GUbJvgw0Bk23kaOufU=\", false, function () {\n  return [useNewsStore];\n});\n\n_c2 = Wrapper;\n\nvar Index = function Index(props) {\n  var pageCount = props.pageCount,\n      currentPage = props.currentPage;\n  var actualPage = currentPage || 1;\n  return __jsx(NewsProvider, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 5\n    }\n  }, __jsx(Wrapper, {\n    props: props,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }\n  }, __jsx(Layout, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }, __jsx(NewsList, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 11\n    }\n  }), __jsx(Paggination, {\n    currentPage: actualPage,\n    pageCount: pageCount,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 11\n    }\n  }))));\n};\n\n_c3 = Index;\n\nIndex.getInitialProps = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(context) {\n    var query, page, res, posts, postsCount, pages;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            query = \"bitcoin\";\n            page = +context.query.page || 1;\n            _context.next = 4;\n            return Fetch(\"https://newsapi.org/v2/top-headlines?country=us&apiKey=baf3b32ef95d4cd0803dcc5d7a5bf9b1&page=\".concat(page, \"&pageSize=10&sortBy=publishedAt&language=en\"));\n\n          case 4:\n            res = _context.sent;\n            _context.next = 7;\n            return res.json();\n\n          case 7:\n            posts = _context.sent;\n            postsCount = posts.totalResults;\n            pages = Math.ceil(posts.totalResults / 10);\n            return _context.abrupt(\"return\", {\n              totalCount: postsCount,\n              pageCount: pages,\n              currentPage: +context.query.page,\n              perPage: 10,\n              data: posts.articles\n            });\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nexport default Index;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"BugsForm\");\n$RefreshReg$(_c2, \"Wrapper\");\n$RefreshReg$(_c3, \"Index\");","map":{"version":3,"sources":["/Users/timurzakirov/Desktop/stupido/anotherTestButNotAnotherDollarYet/pages/index.js"],"names":["React","Fetch","Layout","NewsProvider","useNewsStore","NewsList","Paggination","URL","StoreContext","createContext","BugsForm","store","useState","title","bug","setBug","e","addBug","preventDefault","value","target","prev","Wrapper","children","props","getNews","data","Index","pageCount","currentPage","actualPage","getInitialProps","context","query","page","res","json","posts","postsCount","totalResults","pages","Math","ceil","totalCount","perPage","articles"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Fetch from \"isomorphic-unfetch\";\nimport Layout from \"../components/Layout\";\nimport { NewsProvider } from \"../mobx/newsContext\";\nimport { useNewsStore } from \"../mobx/newsContext\";\nimport { NewsList } from \"../components/NewsList\";\nimport  {Paggination}  from \"../components/Paggination\";\n\nimport URL from \"../config\";\n// description\nconst StoreContext = React.createContext();\n\nconst BugsForm = () => {\n  const store = useNewsStore();\n  const [bug, setBug] = React.useState({ title: \"\" });\n  return (\n    <form\n      onSubmit={e => {\n        store.addBug(bug);\n        setBug({ title: \"\" });\n        e.preventDefault();\n      }}>\n      <input\n        type=\"text\"\n        value={bug.title}\n        onChange={e => {\n          const value = e.target.value;\n          setBug(prev => ({ ...prev, title: value }));\n        }}\n      />\n      <button type=\"submit\">Add</button>\n    </form>\n  );\n};\n\nconst Wrapper = ({ children, props }) => {\n  const store = useNewsStore();\n  store.getNews(props.data);\n;\n\n  return <>{children}</>;\n};\n\nconst Index = props => {\nconst {pageCount, currentPage} = props\n  const actualPage = currentPage || 1;\n  return (\n    <NewsProvider>\n      <Wrapper props={props}>\n        <Layout>\n          <NewsList />\n          <Paggination currentPage={actualPage} pageCount={pageCount}/>\n        </Layout>\n      </Wrapper>\n    </NewsProvider>\n  );\n};\n\nIndex.getInitialProps = async context => {\n  const query = \"bitcoin\";\n  const page = +context.query.page || 1;\n\n  const res = await Fetch(\n    `https://newsapi.org/v2/top-headlines?country=us&apiKey=baf3b32ef95d4cd0803dcc5d7a5bf9b1&page=${page}&pageSize=10&sortBy=publishedAt&language=en`,\n  );\n  const posts = await res.json();\n  const postsCount = posts.totalResults;\n  const pages = Math.ceil(posts.totalResults / 10);\n  return {\n    totalCount: postsCount,\n    pageCount: pages,\n    currentPage: +context.query.page,\n    perPage: 10,\n    data: posts.articles,\n  };\n};\n\nexport default Index;\n"]},"metadata":{},"sourceType":"module"}